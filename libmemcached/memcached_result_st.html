

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Working with result sets &mdash; libmemcached 1.0.99 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Appending or Prepending to data on the server" href="memcached_append.html" />
    <link rel="prev" title="Flushing client buffers" href="memcached_flush_buffers.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> libmemcached
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">libmemcached</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../libmemcached.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">libmemcached API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index_basics.html">Basics</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index_data.html">Working with Data</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="memcached_auto.html">Incrementing and Decrementing Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="memcached_exist.html">Determine if a keys exists.</a></li>
<li class="toctree-l3"><a class="reference internal" href="memcached_touch.html">memcached_touch, memcached_touch_by_key</a></li>
<li class="toctree-l3"><a class="reference internal" href="memcached_flush_buffers.html">Flushing client buffers</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Working with result sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="memcached_append.html">Appending or Prepending to data on the server</a></li>
<li class="toctree-l3"><a class="reference internal" href="memcached_cas.html">Working with data on the server in an atomic fashion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index_errors.html">Messages and Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="index_advanced.html">Advanced Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="index_deprecated.html">Deprecated Functionality</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index_misc.html">Misc</a></li>
</ul>
<p class="caption"><span class="caption-text">libmemcachedutil</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../libmemcachedutil.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../libmemcachedutil/index.html">libmemcachedutil API</a></li>
</ul>
<p class="caption"><span class="caption-text">libhashkit</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../libhashkit.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../libhashkit/index.html">libhashkit API</a></li>
</ul>
<p class="caption"><span class="caption-text">Client Applications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../bin/index.html">Client Applications</a></li>
</ul>
<p class="caption"><span class="caption-text">Copyright</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">Copyright</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">libmemcached</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">libmemcached API</a> &raquo;</li>
        
          <li><a href="index_data.html">Working with Data</a> &raquo;</li>
        
      <li>Working with result sets</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="working-with-result-sets">
<h1>Working with result sets<a class="headerlink" href="#working-with-result-sets" title="Permalink to this headline">¶</a></h1>
<div class="section" id="synopsis">
<h2>SYNOPSIS<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p>#include &lt;libmemcached/memcached_pool.h&gt;</p>
<dl class="type">
<dt id="_CPPv419memcached_result_st">
<span id="_CPPv319memcached_result_st"></span><span id="_CPPv219memcached_result_st"></span><span id="memcached_result_st"></span><em class="property">type </em><code class="sig-name descname">memcached_result_st</code><a class="headerlink" href="#_CPPv419memcached_result_st" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv423memcached_result_createP12memcached_stP19memcached_result_st">
<span id="_CPPv323memcached_result_createP12memcached_stP19memcached_result_st"></span><span id="_CPPv223memcached_result_createP12memcached_stP19memcached_result_st"></span><span id="memcached_result_create__memcached_stP.memcached_result_stP"></span><a class="reference internal" href="#_CPPv419memcached_result_st" title="memcached_result_st">memcached_result_st</a> *<code class="sig-name descname">memcached_result_create</code><span class="sig-paren">(</span><a class="reference internal" href="memcached_create.html#_CPPv412memcached_st" title="memcached_st">memcached_st</a> *<em>ptr</em>, <a class="reference internal" href="#_CPPv419memcached_result_st" title="memcached_result_st">memcached_result_st</a> *<em>result</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv423memcached_result_createP12memcached_stP19memcached_result_st" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv421memcached_result_freeP19memcached_result_st">
<span id="_CPPv321memcached_result_freeP19memcached_result_st"></span><span id="_CPPv221memcached_result_freeP19memcached_result_st"></span><span id="memcached_result_free__memcached_result_stP"></span>void <code class="sig-name descname">memcached_result_free</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv419memcached_result_st" title="memcached_result_st">memcached_result_st</a> *<em>result</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv421memcached_result_freeP19memcached_result_st" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv426memcached_result_key_valueP19memcached_result_st">
<span id="_CPPv326memcached_result_key_valueP19memcached_result_st"></span><span id="_CPPv226memcached_result_key_valueP19memcached_result_st"></span><span id="memcached_result_key_value__memcached_result_stP"></span><em class="property">const</em> char *<code class="sig-name descname">memcached_result_key_value</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv419memcached_result_st" title="memcached_result_st">memcached_result_st</a> *<em>result</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv426memcached_result_key_valueP19memcached_result_st" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv427memcached_result_key_lengthPK19memcached_result_st">
<span id="_CPPv327memcached_result_key_lengthPK19memcached_result_st"></span><span id="_CPPv227memcached_result_key_lengthPK19memcached_result_st"></span><span id="memcached_result_key_length__memcached_result_stCP"></span>size_t <code class="sig-name descname">memcached_result_key_length</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#_CPPv419memcached_result_st" title="memcached_result_st">memcached_result_st</a> *<em>result</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv427memcached_result_key_lengthPK19memcached_result_st" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv422memcached_result_valueP19memcached_result_st">
<span id="_CPPv322memcached_result_valueP19memcached_result_st"></span><span id="_CPPv222memcached_result_valueP19memcached_result_st"></span><span id="memcached_result_value__memcached_result_stP"></span><em class="property">const</em> char *<code class="sig-name descname">memcached_result_value</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv419memcached_result_st" title="memcached_result_st">memcached_result_st</a> *<em>ptr</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv422memcached_result_valueP19memcached_result_st" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv427memcached_result_take_valueP19memcached_result_st">
<span id="_CPPv327memcached_result_take_valueP19memcached_result_st"></span><span id="_CPPv227memcached_result_take_valueP19memcached_result_st"></span><span id="memcached_result_take_value__memcached_result_stP"></span>char *<code class="sig-name descname">memcached_result_take_value</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv419memcached_result_st" title="memcached_result_st">memcached_result_st</a> *<em>ptr</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv427memcached_result_take_valueP19memcached_result_st" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv423memcached_result_lengthPK19memcached_result_st">
<span id="_CPPv323memcached_result_lengthPK19memcached_result_st"></span><span id="_CPPv223memcached_result_lengthPK19memcached_result_st"></span><span id="memcached_result_length__memcached_result_stCP"></span>size_t <code class="sig-name descname">memcached_result_length</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#_CPPv419memcached_result_st" title="memcached_result_st">memcached_result_st</a> *<em>ptr</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv423memcached_result_lengthPK19memcached_result_st" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv422memcached_result_flagsPK19memcached_result_st">
<span id="_CPPv322memcached_result_flagsPK19memcached_result_st"></span><span id="_CPPv222memcached_result_flagsPK19memcached_result_st"></span><span id="memcached_result_flags__memcached_result_stCP"></span>uint32_t <code class="sig-name descname">memcached_result_flags</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#_CPPv419memcached_result_st" title="memcached_result_st">memcached_result_st</a> *<em>result</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv422memcached_result_flagsPK19memcached_result_st" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv420memcached_result_casPK19memcached_result_st">
<span id="_CPPv320memcached_result_casPK19memcached_result_st"></span><span id="_CPPv220memcached_result_casPK19memcached_result_st"></span><span id="memcached_result_cas__memcached_result_stCP"></span>uint64_t <code class="sig-name descname">memcached_result_cas</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#_CPPv419memcached_result_st" title="memcached_result_st">memcached_result_st</a> *<em>result</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv420memcached_result_casPK19memcached_result_st" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv426memcached_result_set_valueP19memcached_result_stPKc6size_t">
<span id="_CPPv326memcached_result_set_valueP19memcached_result_stPKc6size_t"></span><span id="_CPPv226memcached_result_set_valueP19memcached_result_stPKc6size_t"></span><span id="memcached_result_set_value__memcached_result_stP.cCP.s"></span><a class="reference internal" href="memcached_return_t.html#_CPPv418memcached_return_t" title="memcached_return_t">memcached_return_t</a> <code class="sig-name descname">memcached_result_set_value</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv419memcached_result_st" title="memcached_result_st">memcached_result_st</a> *<em>ptr</em>, <em class="property">const</em> char *<em>value</em>, size_t <em>length</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv426memcached_result_set_valueP19memcached_result_stPKc6size_t" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv426memcached_result_set_flagsP19memcached_result_st8uint32_t">
<span id="_CPPv326memcached_result_set_flagsP19memcached_result_st8uint32_t"></span><span id="_CPPv226memcached_result_set_flagsP19memcached_result_st8uint32_t"></span><span id="memcached_result_set_flags__memcached_result_stP.uint32_t"></span>void <code class="sig-name descname">memcached_result_set_flags</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv419memcached_result_st" title="memcached_result_st">memcached_result_st</a> *<em>ptr</em>, uint32_t <em>flags</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv426memcached_result_set_flagsP19memcached_result_st8uint32_t" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv431memcached_result_set_expirationP19memcached_result_st6time_t">
<span id="_CPPv331memcached_result_set_expirationP19memcached_result_st6time_t"></span><span id="_CPPv231memcached_result_set_expirationP19memcached_result_st6time_t"></span><span id="memcached_result_set_expiration__memcached_result_stP.time_t"></span>void <code class="sig-name descname">memcached_result_set_expiration</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv419memcached_result_st" title="memcached_result_st">memcached_result_st</a> *<em>ptr</em>, time_t<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv431memcached_result_set_expirationP19memcached_result_st6time_t" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>Compile and link with -lmemcachedutil -lmemcached</p>
</div>
<div class="section" id="description">
<h2>DESCRIPTION<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>libmemcached(3) can optionally return a <a class="reference internal" href="#_CPPv419memcached_result_st" title="memcached_result_st"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">memcached_result_st</span></code></a> which
acts as a result object. The result objects have added benefits over the
character pointer returns, in that they are forward compatible with new
return items that future memcached servers may implement (the best current
example of this is the CAS return item). The structures can also be reused,
which will save on calls to malloc(3). It is suggested that you use result
objects over char * return functions.</p>
<p>The structure of <a class="reference internal" href="#_CPPv419memcached_result_st" title="memcached_result_st"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">memcached_result_st</span></code></a> has been encapsulated, you should
not write code to directly access members of the structure.</p>
<p><a class="reference internal" href="#_CPPv423memcached_result_createP12memcached_stP19memcached_result_st" title="memcached_result_create"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">memcached_result_create()</span></code></a> will either allocate memory for a
<a class="reference internal" href="#_CPPv419memcached_result_st" title="memcached_result_st"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">memcached_result_st</span></code></a> or will initialize a structure passed to it.</p>
<p><a class="reference internal" href="#_CPPv421memcached_result_freeP19memcached_result_st" title="memcached_result_free"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">memcached_result_free()</span></code></a> will deallocate any memory attached to the
structure. If the structure was also allocated, it will deallocate it.</p>
<p><a class="reference internal" href="#_CPPv426memcached_result_key_valueP19memcached_result_st" title="memcached_result_key_value"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">memcached_result_key_value()</span></code></a> returns the key value associated with the
current result object.</p>
<p><a class="reference internal" href="#_CPPv427memcached_result_key_lengthPK19memcached_result_st" title="memcached_result_key_length"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">memcached_result_key_length()</span></code></a> returns the key length associated with
the current result object.</p>
<p><a class="reference internal" href="#_CPPv422memcached_result_valueP19memcached_result_st" title="memcached_result_value"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">memcached_result_value()</span></code></a> returns the result value associated with the
current result object.</p>
<p><a class="reference internal" href="#_CPPv427memcached_result_take_valueP19memcached_result_st" title="memcached_result_take_value"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">memcached_result_take_value()</span></code></a> returns and hands over the result value
associated with the current result object. You must call free() to release this
value, unless you have made use of a custom allocator. Use of a custom
allocator requires that you create your own custom free() to release it.</p>
<p><a class="reference internal" href="#_CPPv423memcached_result_lengthPK19memcached_result_st" title="memcached_result_length"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">memcached_result_length()</span></code></a> returns the result length associated with
the current result object.</p>
<p><a class="reference internal" href="#_CPPv422memcached_result_flagsPK19memcached_result_st" title="memcached_result_flags"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">memcached_result_flags()</span></code></a> returns the flags associated with the
current result object.</p>
<p><a class="reference internal" href="#_CPPv420memcached_result_casPK19memcached_result_st" title="memcached_result_cas"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">memcached_result_cas()</span></code></a> returns the cas associated with the
current result object. This value will only be available if the server
tests it.</p>
<p><a class="reference internal" href="#_CPPv426memcached_result_set_valueP19memcached_result_stPKc6size_t" title="memcached_result_set_value"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">memcached_result_set_value()</span></code></a> takes a byte array and a size and sets
the result to this value. This function is used for trigger responses.</p>
<p><a class="reference internal" href="#_CPPv426memcached_result_set_flagsP19memcached_result_st8uint32_t" title="memcached_result_set_flags"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">memcached_result_set_flags()</span></code></a> takes a result structure and stores a new
value for the flags field.</p>
<p><a class="reference internal" href="#_CPPv431memcached_result_set_expirationP19memcached_result_st6time_t" title="memcached_result_set_expiration"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">memcached_result_set_expiration()</span></code></a> takes a result structure and stores
a new value for the expiration field (this is only used by read through
triggers).</p>
<p>You may wish to avoid using memcached_result_create(3) with a
stack based allocation. The most common issues related to ABI safety involve
heap allocated structures.</p>
</div>
<div class="section" id="return">
<h2>RETURN<a class="headerlink" href="#return" title="Permalink to this headline">¶</a></h2>
<p>Varies, see particular functions. All structures must have
<a class="reference internal" href="#_CPPv421memcached_result_freeP19memcached_result_st" title="memcached_result_free"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">memcached_result_free()</span></code></a> called on them for cleanup purposes. Failure
to do this will result in leaked memory.</p>
</div>
<div class="section" id="see-also">
<h2>SEE ALSO<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="memcached_append.html" class="btn btn-neutral float-right" title="Appending or Prepending to data on the server" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="memcached_flush_buffers.html" class="btn btn-neutral float-left" title="Flushing client buffers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; <a href="../copyright.html">Copyright</a> 

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>